#!/bin/bash

pdir=$(dirname $0)
installdir=/usr/local

# Basic sanity check: are we invoked from the source directory?
[[ -z $pdir ]] && pdir="."

template=$pdir/Makefile-template

if [[ ! -f $template ]]
then
	echo "error: missing template Makefile $template"
	exit 1
fi

echo "Creating Makefile..."
if ! ( echo "PDIR=$pdir" >> Makefile && echo "INSTALLDIR=$installdir" >> Makefile && cat $template >> Makefile )
then
	echo "error: failed to create Makefile"
	exit 1
fi

echo "Configuration complete. Just run make to build."

exit 0
